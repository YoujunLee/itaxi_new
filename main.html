<!-- iTaxi Main Page -->
<!DOCTYPE html>
<html>
<head>
    <title>iTaxi</title>
    <link rel="shortcut icon" href="./assets/img/favicon.ico">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

    
    <link href="./assets/css/base.css?ver=1.1" rel="stylesheet"> 
    <link href="./assets/css/main.css" rel="stylesheet"> 
    <link href="./assets/css/materialize.css" rel="stylesheet"> 

    <script type="text/javascript" src="./assets/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="./assets/js/materialize.js"></script>

    <script src="./assets/js/all_room_ini.js"></script>
    <script src="./assets/js/all_room_sec.js"></script>
    <script src="./assets/js/participate_room.js"></script>
</head>

<body>
<!-- Car Pool 등록 화면 (Modal)-->
<div id="modal1"  class="modal">
    <div class="modal-content">
     <h1>카풀 생성</h1>

     <form class="form" action="./assets/php/make_room.php" method="post">
  
      <!-- <div id="classify" class= "row col s12 m12">
         <div class="col s3"></div>
          <div id="class" class="col s6 m6">
           <div class="switch-field">
             <input type="radio" id="switch_left" name="switch_2" value="yes" checked/>
             <label for="switch_left">택시</label>
             <input type="radio" id="switch_right" name="switch_2" value="no" />
             <label for="switch_right">자차</label>
           </div>
         </div>
         <div class="col s3"></div>
       </div> -->

       <div id="departure" class= "row col s12 m12">
         <div class="col m3"></div>
          <div class="input-field col s12 m6">
             <select id="departure_select" class="departure_select" name="departure" required>
               <option value="" disabled selected>Select your departure</option>
               <option value="HGU Taxi Station">HGU Taxi Station</option>
               <option value="Pohang Station (포항역)">Pohang Station (포항역)</option>
               <option value="Yangduk (양덕)">Yangduk (양덕)</option>
               <option value="Express Bus Terminal (고터)">Express Bus Terminal (고터)</option>
               <option value="Cityside Bus Terminal (시터)">Cityside Bus Terminal (시터)</option>
               <option value="Pohang Downtown (육거리)">Pohang Downtown (육거리)</option>
               <option value="직접입력">Direct input</option>
             </select>
         </div>
         <div class="col m3 "></div>
       </div>
 
       <div id="arrival" class= "row col s12 m12">
           <div class="col m3"></div>
           <div class="input-field col s12 m6">
               <select id="arrival_select" class="arrival_select" name="arrival" required>
                <option value="" disabled selected>Select your arrival</option>
                <option value="HGU Taxi Station">HGU Taxi Station</option>
                <option value="Pohang Station (포항역)">Pohang Station (포항역)</option>
                <option value="Yangduk (양덕)">Yangduk (양덕)</option>
                <option value="Express Bus Terminal (고터)">Express Bus Terminal (고터)</option>
                <option value="Cityside Bus Terminal (시터)">Cityside Bus Terminal (시터)</option>
                <option value="Pohang Downtown (육거리)">Pohang Downtown (육거리)</option>
                <option value="직접입력">Direct input</option>
               </select>
           </div>
           <div class="col m3"></div>
        </div>
         
        <div id="date" class= "row col s12 m12">
           <div class="col m3"></div>
           <div class="input-field col s12 m6">
               <input type="date" name="date" class="datepicker" required placeholder="Select the departure date">
           </div>
           <div class="col m3"></div>
        </div>
        
        <div id="time" class= "row col s12 m12">
            <div class="col m3"></div>
            <div class="input-field col s12 m6">
                <input type="text" name="time" class="timepicker" required placeholder="Select the departure time">
            </div>
            <div class="col m3"></div>
        </div>
           
        <div id="population" class= "row col s12 m12">
           <div class="col m3"></div>
             <div class="input-field col s12 m6">
               <select name="population" required>
                 <option value="" disabled selected>Select attendant with yourself</option>
                 <option value="2">Two people</option>
                 <option value="3">Three people</option>
                 <option value="4">Four people</option>
                 <option value="4" disabled>As the Korean law, maximum of taxi-attendate is four</option>
               </select>
             </div>
           <div class="col m3"></div>
        </div>
    
        <div class= "row col s12 m12">
            <div class="col s3 m5"></div>
            <div class="col s6 m2">
                <button class="btn waves-effect waves-light" type="submit" name="action">Submit</button>
            </div>
        </div>
      </div>
    </form>
  </div>
</div>
 
 <!-- header 영역-->  
 <header>
     <div class="header_center">
       <h1 class="Logo_group">
         <ul class="texts">
           <li><a href="./main.html"><img class="logo" src="./assets/img/logo_big.png" alt="로고"></a></li>
           <li class="explain">Handong Global Univ. Taxi Carpool Service</li>
         </ul>
       </h1>
      
       <nav>
         <ul class="head_gnb">     
           <li class="title list pc"><a class="modal-trigger" href="#modal1"  routerLinkActive="active">Register</a></li>
           <li class="title list pc"><a href="./myinfo.html"  routerLinkActive="active">My Info.</a></li>                 
           <li class="pc"><a href="./assets/php/logout.php" data-toggle="modal" data-target="#loginModal"><p class="my_login"><span class="myname">Logout</span></p></a>   </li>    
         </ul>  
         <div id="mobile_menu" class="mobile_menu">
            <a href="#" data-activates="slide-out" class="button-collapse"><i class="material-icons">menu</i></a>
            <ul id="slide-out" class="side-nav">
                <li><div class="user-view">
                    <div class="background">
                      <img src="./assets/img/handong.jpg">
                    </div>
                    <a href="#!name"><span class="white-text name" id="menu_mail"></span></a>
                    <a href="#!email"><span id="menu_stu_id" class="white-text email"></span></a>
                  </div></li>
                <li class=""><a class="modal-trigger" href="#modal1"  routerLinkActive="active"><p> Register</p></a></li>
                <li class=""><a href="./myinfo.html" onclick="formChangeInput()"  routerLinkActive="active"><p>My Info.</p> </a></li>                 
                <li class=""><a href="./assets/php/logout.php" data-toggle="modal" data-target="#loginModal"><p class="my_login"><span class="myname">Logout</span></p></a>   
                  
              </li>  
              <br><br><hr><br>
              <div style="bottom:0px;">  
              <h4>&nbsp; launch by CRA</h4>
              <h4>&nbsp; Dev. Contact: injxyj@gmail.com</h4>  
              <h5>&nbsp;&nbsp; (class of 2011 Youjun Lee)</h5>   
              </div>
            </ul>
           
        </div>
      </nav>
     </div>	       
 </header> 
 <!-- filter 영역-->
 <div class="container">
     <div class="list_container">
       
       <div id="classify" class="title">  
           <dl class="dropdown"> 
             <dt>
               <a id="classify" href="#">
                 <span class="hida">Division (구분)</span>    
                 <p class="multiSel"></p>  
               </a>
               </dt>
             
               <dd>
                   <div class="mutliSelect">
                       <ul id="classify">
                           <!-- <li><label><input type="radio" name="classfy_radio" value="전체" checked/>택시+카풀</label></li> -->
                           <li><label><input type="radio" name="classfy_radio" value="택시" checked />Taxi</label></li>
                           <li><label><input type="radio" name="classfy_radio" value="카풀" disabled/>Carpool (Coming soon)</label></li>
                       </ul>
                   </div>
               </dd>
           </dl>    
         </div>
<!--  
         <div id="departure" class="title">  
             <dl class="dropdown"> 
               <dt>
                 <a href="#" id="departure">
                   <span class="hida">출발지</span>    
                   <p class="multiSel"></p>  
                 </a>
                 </dt>
               
                 <dd>
                     <div id="myBtnContainer" class="mutliSelect">
                         <ul id="departure">
                             <li><label><input type="radio" name="departure_radio" value="전체" onclick="filterSelection('all')"/></label>전체</li>
                             <li><label><input type="radio" name="departure_radio" value="한동대학교" onclick="filterSelection('handong')" />한동대학교</label></li>
                             <li><label><input type="radio" name="departure_radio" value="포항역" onclick="filterSelection('pohang')"/>포항역</label></li>
                             <li><label><input type="radio" name="departure_radio" value="양덕" onclick="filterSelection('yangduck')" />양덕</label></li>
                             <li><label><input type="radio" name="departure_radio" value="고속버스터미널" onclick="filterSelection('express')" />고속터미널</label></li>
                             <li><label><input type="radio" name="departure_radio" value="시외버스터미널" onclick="filterSelection('side_express')" />시외버스터미널</label></li>
                             <li><label><input type="radio" name="departure_radio" value="육거리"  onclick="filterSelection('six_street')"/>육거리</label></li>
                         </ul>
                     </div>
                 </dd>
             </dl>    
           </div> -->
 
           <div class="title">  
             <dl class="dropdown"> 
               <dt>
                 <a href="#" id="arrival">
                   <span class="hida">Arrival (도착지)</span>    
                   <p class="multiSel"></p>  
                 </a>
                 </dt>
               
                 <dd>
                     <div class="mutliSelect">
                         <ul id="arrival">
                           <li><label><input type="radio" name="arrival_radio" value="전체" onclick="filterSelection('all')" />All</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="한동대학교" onclick="filterSelection('handong_a')" />HGU</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="포항역" onclick="filterSelection('pohang_a')" />Pohang Station (포항역)</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="양덕" onclick="filterSelection('yangduk_a')"/>Yangduk (양덕)</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="고속버스터미널" onclick="filterSelection('express_a')" />Express Bus Terminal (고터)</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="시외버스터미널" onclick="filterSelection('side_a')" />Cityside Bus Terminal (시터)</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="육거리" onclick="filterSelection('six_street_a')"/>Pohang Downtown (육거리)</label></li>
                         </ul>
                     </div>
                 </dd>
             </dl>    
           </div> 
     </div>
   </div>

  <!--card 선택시 방에 참가 여부 묻는 confirm 창 -->
   <div id="modal2"  class="modal">
      <div class="modal-content">
          <h3>Are you gonna participate the room?<br>방에 참가하시겠습니까?</h3>
          <div class="modal-footer">
              <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">No</a>
              <a id="wow" class="modal-action modal-close waves-effect waves-red btn-flat ">Yes</a>
            </div>
      </div>
  </div>

  <!-- card area-->
  <div class="card_area">
  <div class="wrap-loading display-none">
  <div class="preloader-wrapper big active">
      <div class="spinner-layer spinner-blue-only">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>
    </div>
  </div>

    <div class="card_container">
      <h1 class="main_title" id="all_title">All Room (전체방)</h1>
      <h1 class="main_title" style="display: none;" id="participate_title">Participate Room (참여 중)</h1>
      <br>
      <ul>
       <div id="all_room"></div> <!--card나타나는 영역 'all_room_ini.js' file과 연동-->
      </ul> 

      <!--내가 참가한 방만 보여지게 하는 btn-->
      <div class="fixed-action-btn direction-bottom click-to-toggle " style="bottom: 60px; right: 24px;">
        <a id="change_post" class="btn-floating btn-large yellow accent-4">
          <i class="material-icons">assignment_ind</i>
        </a>
      </div>

      <!--다시 전체방 보여지게 하는 btn-->
      <div class="fixed-action-btn direction-bottom click-to-toggle " style="bottom: 60px; right: 24px;">
        <a id="return_post" class="btn-floating btn-large teal darken-2" style="display:none">
          <i class="material-icons">reply_all</i>
        </a>
      </div>

    </div>
  </div>
  <div id="page-loader">
      <h1 class="main-title" style="color:#ffffff; margin-top:30%;">loading...</h1><br>
      <h3 class="main-title" style="color:#ffffff;">Everything is possible for him who belives (Mark 9:23)</h3>
  </div>
  <footer>
    <div class='pagination-container' >
      <nav>
        <ul class="pagination"></ul>
      </nav>
    </div>
  </footer>
</body>

<script>
  $('.button-collapse').sideNav({
      menuWidth: 200, // Default is 300
      edge: 'right', // Choose the horizontal origin
      closeOnClick: true, // Closes side-nav on <a> clicks, useful for Angular/Meteor
      draggable: true, // Choose whether you can drag to open on touch screens,
      onOpen: function(el) { /* Do Stuff*/ }, // A function to be called when sideNav is opened,
      onClose: function(el) { /* Do Stuff*/ }, // A function to be called when sideNav is closed,
    }
  );
 
//Cookie 확인
function getCookie(name) {
    var dc = document.cookie;
    var prefix = name + "=";
    var begin = dc.indexOf("; " + prefix);
    if (begin == -1) {
        begin = dc.indexOf(prefix);
        if (begin != 0) return null;
    }else{
        begin += 2;
        var end = document.cookie.indexOf(";", begin);
        if (end == -1) {
        end = dc.length;
        }
    }
    return decodeURI(dc.substring(begin + prefix.length, end));
} 

function doSomething() {
    var myCookie = getCookie("stu_id");

    if (myCookie == null) {
        alert("You have to login first");
        location.replace("./index.html");
    }
}
 
 $(document).ready(function(){
  var myCookie = getCookie("stu_id");
  $("#menu_stu_id").html("Welcome to iTaxi");
})
/*confirm 창 나타내고 해당 방으로 연결 짓는 부분 */
var room_id;
$(document).ready(function() {
    $(document).on("click","#room",function() {
      room_id=$(this).children('.card').children('dl').children('dd').children('.room_id').text();
      
    });
    $(document).on("click","#wow",function() {
     document.getElementById('page-loader').style.display='block';
     location.href="./assets/php/enter_room.php?post_id="+room_id;
    });  
    doSomething();
});

function myroom(id){
  location.href="./room.html?post_id="+id;
}

</script>
<script src="./assets/js/stylejs.js"></script>
<script src="./assets/js/index.js"></script>
</html>
