<!-- iTaxi Main Page -->
<!DOCTYPE html>
<html>
<head>
  	<title>iTaxi</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    
    <link href="./assets/css/base.css?ver=1.1" rel="stylesheet"> 
    <link href="./assets/css/main.css" rel="stylesheet"> 
    <link href="./assets/css/materialize.css" rel="stylesheet"> 

    <script type="text/javascript" src="./assets/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="./assets/js/materialize.js"></script>

    <script src="./assets/js/all_room_ini.js"></script>
    <script src="./assets/js/all_room_sec.js"></script>
    <script src="./assets/js/participate_room.js"></script>

</head>

<body>
<!-- Car Pool 등록 화면 (Modal)-->
<div id="modal1"  class="modal">
    <div class="modal-content">
     <h1>카풀 생성</h1>

     <form class="form" action="http://52.78.208.153/assets/php/make_room.php" method="post">
  
      <!-- <div id="classify" class= "row col s12 m12">
         <div class="col s3"></div>
          <div id="class" class="col s6 m6">
           <div class="switch-field">
             <input type="radio" id="switch_left" name="switch_2" value="yes" checked/>
             <label for="switch_left">택시</label>
             <input type="radio" id="switch_right" name="switch_2" value="no" />
             <label for="switch_right">자차</label>
           </div>
         </div>
         <div class="col s3"></div>
       </div> -->

       <div id="departure" class= "row col s12 m12">
         <div class="col m3"></div>
          <div class="input-field col s12 m6">
             <select id="departure_select" class="departure_select" name="departure">
               <option value="" disabled selected>Select your departure</option>
               <option value="HGU Taxi Station">HGU Taxi Station</option>
               <option value="Pohang Station (포항역)">Pohang Station (포항역)</option>
               <option value="Yangduk (양덕)">Yangduk (양덕)</option>
               <option value="Express Bus Terminal (고터)">Express Bus Terminal (고터)</option>
               <option value="Cityside Bus Terminal (시터)">Cityside Bus Terminal (시터)</option>
               <option value="Pohang Downtown (육거리)">Pohang Downtown (육거리)</option>
               <option value="직접입력">Direct input</option>
             </select>
         </div>
         <div class="col m3 "></div>
       </div>
 
       <div id="arrival" class= "row col s12 m12">
           <div class="col m3"></div>
           <div class="input-field col s12 m6">
               <select id="arrival_select" class="arrival_select" name="arrival">
                <option value="" disabled selected>Select your arrival</option>
                <option value="HGU Taxi Station">HGU Taxi Station</option>
                <option value="Pohang Station (포항역)">Pohang Station (포항역)</option>
                <option value="Yangduk (양덕)">Yangduk (양덕)</option>
                <option value="Express Bus Terminal (고터)">Express Bus Terminal (고터)</option>
                <option value="Cityside Bus Terminal (시터)">Cityside Bus Terminal (시터)</option>
                <option value="Pohang Downtown (육거리)">Pohang Downtown (육거리)</option>
                <option value="직접입력">Direct input</option>
               </select>
           </div>
           <div class="col m3"></div>
        </div>
         
        <div id="date" class= "row col s12 m12">
           <div class="col m3"></div>
           <div class="input-field col s12 m6">
               <input type="date" name="date" class="datepicker" placeholder="Select the departure date">
           </div>
           <div class="col m3"></div>
        </div>
        
        <div id="time" class= "row col s12 m12">
            <div class="col m3"></div>
            <div class="input-field col s12 m6">
                <input type="text" name="time" class="timepicker" placeholder="Select the departure time">
            </div>
            <div class="col m3"></div>
        </div>
           
        <div id="population" class= "row col s12 m12">
           <div class="col m3"></div>
             <div class="input-field col s12 m6">
               <select name="population">
                 <option value="" disabled selected>Select attendant with yourself</option>
                 <option value="2">Two people</option>
                 <option value="3">Three people</option>
                 <option value="4">Four people</option>
                 <option value="4" disabled>As the Korean law, maximum of taxi-attendate is four</option>
               </select>
             </div>
           <div class="col m3"></div>
        </div>
    
        <div class= "row col s12 m12">
            <div class="col m3"></div>
            <div class="col s12 m6">
                <button class="btn waves-effect waves-light" type="submit" name="action">Submit</button>
            </div>
            <div class="col m3"></div>
        </div>
      </div>
    </form>
  </div>
</div>
 
 <!-- header 영역-->  
 <header>
     <div class="header_center">
       <h1 class="Logo_group">
         <ul class="texts">
           <li><a href="./main.html"><img src="./assets/img/logo_big.png" alt="로고"></a></li>
           <li class="explain">Handong Global Univ. Taxi Carpool Service</li>
         </ul>
       </h1>
      
       <nav>
         <ul class="head_gnb">     
           <li class="title list"><a class="modal-trigger" href="#modal1"  routerLinkActive="active">등록</a></li>
           <li class="title list"><a href="./room.html?post_id=2" onclick="formChangeInput()"  routerLinkActive="active">내정보</a></li>
           <li class="title list"><a href="./login.html" data-toggle="modal" data-target="#loginModal">설정</a></li>                   
           <li><a href="./assets/php/logout.php" data-toggle="modal" data-target="#loginModal"><p class="my_login"><span class="myname">Logout</span></p></a>   </li>    
         </ul>
         <button  class="modal-trigger" href="#modal1" >123</button>   
       </nav>
     </div>	       
 </header> 
 <!-- filter 영역-->
 <div class="container">
     <div class="list_container">
       
       <div id="classify" class="title">  
           <dl class="dropdown"> 
             <dt>
               <a id="classify" href="#">
                 <span class="hida">구분</span>    
                 <p class="multiSel"></p>  
               </a>
               </dt>
             
               <dd>
                   <div class="mutliSelect">
                       <ul id="classify">
                           <li><label><input type="radio" name="classfy_radio" value="전체" checked/>택시+카풀</label></li>
                           <li><label><input type="radio" name="classfy_radio" value="택시" />택시</label></li>
                           <li><label><input type="radio" name="classfy_radio" value="카풀" />카풀</label></li>
                       </ul>
                   </div>
               </dd>
           </dl>    
         </div>
 
         <div id="departure" class="title">  
             <dl class="dropdown"> 
               <dt>
                 <a href="#" id="departure">
                   <span class="hida">출발지</span>    
                   <p class="multiSel"></p>  
                 </a>
                 </dt>
               
                 <dd>
                     <div id="myBtnContainer" class="mutliSelect">
                         <ul id="departure">
                             <li><label><input type="radio" name="departure_radio" value="전체" checked/></label>전체</li>
                             <li><label><input type="radio" name="departure_radio" value="한동대학교" />한동대학교</label></li>
                             <li><label><input type="radio" name="departure_radio" value="포항역" onclick="filterSelection('pohang')"/>포항역</label></li>
                             <li><label><input type="radio" name="departure_radio" value="양덕" />양덕</label></li>
                             <li><label><input type="radio" name="departure_radio" value="고속버스터미널" />고속터미널</label></li>
                             <li><label><input type="radio" name="departure_radio" value="시외버스터미널" />시외버스터미널</label></li>
                             <li><label><input type="radio" name="departure_radio" value="육거리" />육거리</label></li>
                         </ul>
                     </div>
                 </dd>
             </dl>    
           </div>
 
           <div class="title">  
             <dl class="dropdown"> 
               <dt>
                 <a href="#" id="arrival">
                   <span class="hida">도착지</span>    
                   <p class="multiSel"></p>  
                 </a>
                 </dt>
               
                 <dd>
                     <div class="mutliSelect">
                         <ul id="arrival">
                           <li><label><input type="radio" name="arrival_radio" value="전체" checked/>전체</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="한동대학교" />한동대학교</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="포항역" />포항역</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="양덕" />양덕</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="고속버스터미널" />고속터미널</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="시외버스터미널" />시외버스터미널</label></li>
                           <li><label><input type="radio" name="arrival_radio" value="육거리" />육거리</label></li>
                         </ul>
                     </div>
                 </dd>
             </dl>    
           </div> 
     </div>
   </div>

  <!--card 선택시 방에 참가 여부 묻는 confirm 창 -->
   <div id="modal2"  class="modal">
      <div class="modal-content">
          <h3>방에 참가하시겠습니까?</h3>
          <div class="modal-footer">
              <a id="wow" class="modal-action modal-close waves-effect waves-red btn-flat ">Disagree</a>
              <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Agree</a>
            </div>
      </div>
  </div>

  <!-- card area-->
  <div class="card_area">
  <div class="wrap-loading display-none">
  <div class="preloader-wrapper big active">
      <div class="spinner-layer spinner-blue-only">
        <div class="circle-clipper left">
          <div class="circle"></div>
        </div><div class="gap-patch">
          <div class="circle"></div>
        </div><div class="circle-clipper right">
          <div class="circle"></div>
        </div>
      </div>
    </div>
  </div>

    <div class="card_container">
      <h1 class="main_title" id="all_title">All Room (전체방)</h1>
      <h1 class="main_title" style="display: none;" id="participate_title">Participate Room (참여 중)</h1>
      <br>
      <ul>
       <div id="all_room"></div> <!--card나타나는 영역 'all_room_ini.js' file과 연동-->
      </ul> 

      <!--내가 참가한 방만 보여지게 하는 btn-->
      <div class="fixed-action-btn direction-bottom click-to-toggle " style="bottom: 60px; right: 24px;">
        <a id="change_post" class="btn-floating btn-large yellow accent-4">
          <i class="material-icons">assignment_ind</i>
        </a>
      </div>

      <!--다시 전체방 보여지게 하는 btn-->
      <div class="fixed-action-btn direction-bottom click-to-toggle " style="bottom: 60px; right: 24px;">
        <a id="return_post" class="btn-floating btn-large teal darken-2" style="display:none">
          <i class="material-icons">reply_all</i>
        </a>
      </div>

    </div>
  </div>

  <footer>
    <div class='pagination-container' >
      <nav>
        <ul class="pagination"></ul>
      </nav>
    </div>
  </footer>
</body>

<script>
//Cookie 확인
function getCookie(name) {
    var dc = document.cookie;
    var prefix = name + "=";
    var begin = dc.indexOf("; " + prefix);
    if (begin == -1) {
        begin = dc.indexOf(prefix);
        if (begin != 0) return null;
    }else{
        begin += 2;
        var end = document.cookie.indexOf(";", begin);
        if (end == -1) {
        end = dc.length;
        }
    }
    return decodeURI(dc.substring(begin + prefix.length, end));
} 

function doSomething() {
    var myCookie = getCookie("stu_id");

    if (myCookie == null) {
        alert("You have to login first");
        location.replace("./index.html");
    }
}
/*confirm 창 나타내고 해당 방으로 연결 짓는 부분 */
var room_id;
$(document).ready(function() {
    $(document).on("click","#room",function() {
      room_id=$(this).children('.card').children('dl').children('dd').children('.room_id').text();
    });

    $(document).on("click","#wow",function() {
     location.href="http://52.78.208.153/assets/php/enter_room.php?post_id="+room_id;
    });
    
    doSomething();
});

function myroom(id){
  location.href="http://52.78.208.153/room.html?post_id="+id;
}
</script>
<script src="./assets/js/stylejs.js"></script>
<script src="./assets/js/index.js"></script>
</html>