<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="./assets/css/base.css" rel="stylesheet"> 
    <link href="./assets/css/main.css" rel="stylesheet"> 
    <link href="./assets/css/materialize.css" rel="stylesheet"> 
    <script type="text/javascript" src="./assets/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="./assets/js/materialize.js"></script>
    <script src="./assets/js/post_json.js"></script>
  </head>

<body>

    <!-- The Modal (contains the Sign Up form) -->
<div id="modal1"  class="modal">
   <div class="modal-content">
    <h1>카풀 생성</h1>
    <form class="form" action="http://52.78.208.153/assets/php/make_room.php" method="post">
      <div id="classify" class= "row col s12">
        <div class="col s3"></div>
         <div id="class" class="col s6">
          <div class="switch-field">
            <input type="radio" id="switch_left" name="switch_2" value="yes" checked/>
            <label for="switch_left">택시</label>
            <input type="radio" id="switch_right" name="switch_2" value="no" />
            <label for="switch_right">자차</label>
          </div>
        </div>
        <div class="col s3"></div>
      </div>

      <div id="departure" class= "row col s12">
        <div class="col s3"></div>
         <div class="input-field col s6">
            <select name="departure">
              <option value="" disabled selected>출발지를 선택해주세요.</option>
              <option value="한동대학교 택시승강장">한동대학교 택시승강장</option>
              <option value="포항역">포항역</option>
              <option value="채플">채플</option>
            </select>
        </div>
        <div class="col s3"></div>
      </div>

      <div id="arrival" class= "row col s12">
          <div class="col s3"></div>
          <div class="input-field col s6">
              <select name="arrival">
                <option value="" disabled selected>도착지를 선택해주세요.</option>
                <option value="한동대학교 택시승강장">한동대학교 택시승강장</option>
                <option value="포항역">포항역</option>
                <option value="채플">채플</option>
              </select>
          </div>
          <div class="col s3"></div>
        </div>
        
        <div id="date" class= "row col s12">
            <div class="col s3"></div>
            <div class="input-field col s6">
                <input type="date" name="date" class="datepicker" placeholder="날짜를 선택해주세요.">
            </div>
            <div class="col s3"></div>
          </div>
        
          <div id="time" class= "row col s12">
              <div class="col s3"></div>
              <div class="input-field col s6">
                  <input type="text" name="time" class="timepicker" placeholder="시간을 선택해주세요.">
              </div>
              <div class="col s3"></div>
            </div>
          
            <div id="population" class= "row col s12">
              <div class="col s3"></div>
                <div class="input-field col s6">
                    <input type="tel" name="population" maxlength="1" placeholder="탑승 인원을 선택해주세요.">
                </div>
              <div class="col s3"></div>
            </div>

            
            <div class= "row col s12">
                <div class="col s3"></div>
                  <div class="col s6">
                      <button class="btn waves-effect waves-light" type="submit" name="action">Submit</button>
                </div>
                  </div>
                <div class="col s3"></div>
              </div>
            </form>
          </div>
  </div>



  
  <header>
    <div class="header_center">
      <h1 class="Logo_group">
        <ul class="texts">
          <li><a href="/index"><img src="./assets/img/logo_big.png" alt="로고"></a></li>
          <li class="explain">한동대학교 택시 카풀 서비스</li>
        </ul>
      </h1>
     
      <nav>
        <ul class="head_gnb">     
          <li class="title list"><a class="waves-effect waves-light btn modal-trigger" href="#modal1"  routerLinkActive="active">등록</a></li>
          <li class="title list"><a routerLink=""  routerLinkActive="active">내정보</a></li>
          <li class="title list"><a href="#" data-toggle="modal" data-target="#loginModal">설정</a></li>                   
          <li><a href="#" data-toggle="modal" data-target="#loginModal"><p class="my_login"><span class="myname">Login</span></p></a></li>                 
        </ul>
      </nav>
    </div>	   
  </header> 

 

 
<div class="container">
    <div class="list_container">
      
      <div id="classify" class="title">  
          <dl class="dropdown"> 
            <dt>
              <a id="classify" href="#">
                <span class="hida">구분</span>    
                <p class="multiSel"></p>  
              </a>
              </dt>
            
              <dd>
                  <div class="mutliSelect">
                      <ul id="classify">
                          <li><label><input type="radio" name="classfy_radio" value="전체" checked/>택시+카풀</label></li>
                          <li><label><input type="radio" name="classfy_radio" value="택시" />택시</label></li>
                          <li><label><input type="radio" name="classfy_radio" value="카풀" />카풀</label></li>
                      </ul>
                  </div>
              </dd>
          </dl>    
        </div>

        <div id="departure" class="title">  
            <dl class="dropdown"> 
              <dt>
                <a href="#" id="departure">
                  <span class="hida">출발지</span>    
                  <p class="multiSel"></p>  
                </a>
                </dt>
              
                <dd>
                    <div id="myBtnContainer" class="mutliSelect">
                        <ul id="departure">
                            <li><label><input type="radio" name="departure_radio" value="전체" checked/></label>전체</li>
                            <li><label><input type="radio" name="departure_radio" value="한동대학교" />한동대학교</label></li>
                            <li><label><input type="radio" name="departure_radio" value="포항역" onclick="filterSelection('pohang')"/>포항역</label></li>
                            <li><label><input type="radio" name="departure_radio" value="양덕" />양덕</label></li>
                            <li><label><input type="radio" name="departure_radio" value="고속버스터미널" />고속터미널</label></li>
                            <li><label><input type="radio" name="departure_radio" value="시외버스터미널" />시외버스터미널</label></li>
                            <li><label><input type="radio" name="departure_radio" value="육거리" />육거리</label></li>
                        </ul>
                    </div>
                </dd>
            </dl>    
          </div>

          <div class="title">  
            <dl class="dropdown"> 
              <dt>
                <a href="#" id="arrival">
                  <span class="hida">도착지</span>    
                  <p class="multiSel"></p>  
                </a>
                </dt>
              
                <dd>
                    <div class="mutliSelect">
                        <ul id="arrival">
                          <li><label><input type="radio" name="arrival_radio" value="전체" checked/>전체</label></li>
                          <li><label><input type="radio" name="arrival_radio" value="한동대학교" />한동대학교</label></li>
                          <li><label><input type="radio" name="arrival_radio" value="포항역" />포항역</label></li>
                          <li><label><input type="radio" name="arrival_radio" value="양덕" />양덕</label></li>
                          <li><label><input type="radio" name="arrival_radio" value="고속버스터미널" />고속터미널</label></li>
                          <li><label><input type="radio" name="arrival_radio" value="시외버스터미널" />시외버스터미널</label></li>
                          <li><label><input type="radio" name="arrival_radio" value="육거리" />육거리</label></li>
                        </ul>
                    </div>
                </dd>
            </dl>    
          </div> 
          
    </div>
  </div>

  <div class="card_area">
    <div class="card_container">
      <ul>
      <div id="tree"></div>

      </ul> 
    
    </div>
  </div>

  <footer>

  </footer>
</body>
<script>
$(".dropdown dt a"+"#classify").on('click', function() {
  $(".dropdown dd ul"+"#classify").slideToggle('fast');
  $(this).parents().siblings('dd').addClass('open_classify');
});

$(".dropdown dt a"+"#departure").on('click', function() {
  $(".dropdown dd ul"+"#departure").slideToggle('fast');
  $(this).parents().siblings('dd').addClass('open_departure');
});

$(".dropdown dt a"+"#arrival").on('click', function() {
  $(".dropdown dd ul"+"#arrival").slideToggle('fast');
  $(this).parents().siblings('dd').addClass('open_arrival');
});

$(document).bind('click', function(e) {
  var $clicked = $(e.target);
  if ($clicked.parents().hasClass("dropdown")){
    
    if($clicked.parents().siblings('dd').hasClass('open_classify')){
      $(".dropdown dd ul"+"#arrival").hide();
      $(".dropdown dd ul"+"#departure").hide();
    }else if($clicked.parents().siblings('dd').hasClass('open_departure')){
      $(".dropdown dd ul"+"#arrival").hide();
      $(".dropdown dd ul"+"#classify").hide();
    }else if($clicked.parents().siblings('dd').hasClass('open_arrival')){  
      $(".dropdown dd ul"+"#departure").hide();
      $(".dropdown dd ul"+"#classify").hide();
   }
  }else{
    $(".dropdown dd ul"+"#departure").hide();
      $(".dropdown dd ul"+"#classify").hide();
      $(".dropdown dd ul"+"#arrival").hide();
   }
  
});

$(".dropdown dd ul li a").on('click', function() {
  $(".dropdown dd ul").hide();
});

function getSelectedValue(id) {
  return $("#" + id).find("dt a span.value").html();
}

$('.mutliSelect input[type="radio"]').on('click', function(e) {

  var title = $(this).closest('.mutliSelect').find('input[type="radio"]').val(),
    title = $(this).val();
  var $clicked = $(e.target);
  
  var $parent_target=$clicked.parents('.dropdown').children('dt').children('a').children('.multiSel');
  var $parent_hide=$clicked.parents('.dropdown').children('dt').children('a').children('.hida');
  

  if ($(this).is(':checked')) {
    var html = '<span title="' + title + '">' + title + '</span>';
    $($parent_target.children('span')).remove();
    $($parent_target).append(html);
    $($parent_hide).hide();
  } else {
    $('span[title="' + title + '"]').remove();
    var ret = $(".hida");
    $('.dropdown dt a').append(ret);
  }
});

/*-----------------------------------------------------*/
filterSelection("all")
function filterSelection(c) {
  var x, i;
  x = document.getElementsByClassName("filterDiv");
  if (c == "all") c = "";
  // Add the "show" class (display:block) to the filtered elements, and remove the "show" class from the elements that are not selected
  for (i = 0; i < x.length; i++) {
    w3RemoveClass(x[i], "show");
    if (x[i].className.indexOf(c) > -1) 
      w3AddClass(x[i], "show");
  }
}

// Show filtered elements
function w3AddClass(element, name) {
  var i, arr1, arr2;
  arr1 = element.className.split(" ");
  arr2 = name.split(" ");
  for (i = 0; i < arr2.length; i++) {
    if (arr1.indexOf(arr2[i]) == -1) {
      element.className += " " + arr2[i];
    }
  }
}

// Hide elements that are not selected
function w3RemoveClass(element, name) {
  var i, arr1, arr2;
  arr1 = element.className.split(" ");
  arr2 = name.split(" ");
  for (i = 0; i < arr2.length; i++) {
    while (arr1.indexOf(arr2[i]) > -1) {
      arr1.splice(arr1.indexOf(arr2[i]), 1); 
    }
  }
  element.className = arr1.join(" ");
}

  $(document).ready(function() {
      $('select').material_select();
    });

    $('.datepicker').pickadate({
    selectMonths: true, // Creates a dropdown to control month
    selectYears: 15, // Creates a dropdown of 15 years to control year,
    today: 'Today',
    clear: 'Clear',
    close: 'Ok',
    closeOnSelect: false // Close upon selecting a date,
  });

  $('.timepicker').pickatime({
    default: 'now', // Set default time: 'now', '1:30AM', '16:30'
    fromnow: 0,       // set default time to * milliseconds from now (using with default = 'now')
    twelvehour: false, // Use AM/PM or 24-hour format
    donetext: 'OK', // text for done-button
    cleartext: 'Clear', // text for clear-button
    canceltext: 'Cancel', // Text for cancel-button
    autoclose: false, // automatic close timepicker
    ampmclickable: true, // make AM PM clickable
    aftershow: function(){} //Function for after opening timepicker
  });
/*----------------------------------*/
// Get the modal
$(document).ready(function(){
    // the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
    $('.modal').modal();
  });
  $('#modal1').modal('open');
  $('#modal1').modal('close');

</script>
</html>